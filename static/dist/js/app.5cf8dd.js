!function(t){function e(e){for(var r,a,i=e[0],c=e[1],s=e[2],d=0,f=[];d<i.length;d++)a=i[d],u[a]&&f.push(u[a][0]),u[a]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(t[r]=c[r]);for(l&&l(e);f.length;)f.shift()();return o.push.apply(o,s||[]),n()}function n(){for(var t,e=0;e<o.length;e++){for(var n=o[e],r=!0,i=1;i<n.length;i++){var c=n[i];0!==u[c]&&(r=!1)}r&&(o.splice(e--,1),t=a(a.s=n[0]))}return t}var r={},u={1:0},o=[];function a(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.e=function(t){var e=[],n=u[t];if(0!==n)if(n)e.push(n[2]);else{var r=new Promise(function(e,r){n=u[t]=[e,r]});e.push(n[2]=r);var o,i=document.createElement("script");i.charset="utf-8",i.timeout=120,a.nc&&i.setAttribute("nonce",a.nc),i.src=function(t){return a.p+"./js/chunk/"+({}[t]||t)+"."+{3:"901a30",4:"b48edb",5:"236dbf",6:"1b7184"}[t]+".chunk.js"}(t),o=function(e){i.onerror=i.onload=null,clearTimeout(c);var n=u[t];if(0!==n){if(n){var r=e&&("load"===e.type?"missing":e.type),o=e&&e.target&&e.target.src,a=new Error("Loading chunk "+t+" failed.\n("+r+": "+o+")");a.type=r,a.request=o,n[1](a)}u[t]=void 0}};var c=setTimeout(function(){o({type:"timeout",target:i})},12e4);i.onerror=i.onload=o,document.head.appendChild(i)}return Promise.all(e)},a.m=t,a.c=r,a.d=function(t,e,n){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},a.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)a.d(n,r,function(e){return t[e]}.bind(null,r));return n},a.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="/static/dist/",a.oe=function(t){throw console.error(t),t};var i=window.webpackJsonp=window.webpackJsonp||[],c=i.push.bind(i);i.push=e,i=i.slice();for(var s=0;s<i.length;s++)e(i[s]);var l=c;o.push([190,0,2]),n()}({121:function(t,e,n){"use strict";var r=function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"blank"},[e("router-view")],1)},u=[];n.d(e,"a",function(){return r}),n.d(e,"b",function(){return u})},122:function(t,e,n){"use strict";var r=function(){var t=this.$createElement;this._self._c;return this._m(0)},u=[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"error-wrap"},[e("img",{staticClass:"error-404",attrs:{src:"/static/img/common/error-404.png"}})])}];n.d(e,"a",function(){return r}),n.d(e,"b",function(){return u})},123:function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"whole-container"},[n("el-row",[n("el-col",{staticStyle:{float:"right","text-align":"right"},attrs:{span:6}},[n("Header",{attrs:{treeId:t.treeId}})],1)],1),t._v(" "),n("el-row",[n("el-col",{attrs:{span:3}},[n("h4",{staticClass:"col-title"},[t._v("组件列表")]),t._v(" "),n("div",{staticClass:"grid-content cube-nav-grid"},[n("Navbar")],1)]),t._v(" "),n("el-col",{attrs:{span:5}},[n("h4",{staticClass:"col-title"},[t._v("组件操作")]),t._v(" "),n("div",{staticClass:"grid-content cube-action-grid"},[n("Actionbar",{attrs:{node:t.struct}})],1)]),t._v(" "),n("el-col",{attrs:{span:9}},[n("h4",{staticClass:"col-title"},[t._v("预览展示")]),t._v(" "),n("div",{staticClass:"grid-content cube-preview-grid"},[n("Preview")],1)]),t._v(" "),n("el-col",{attrs:{span:7}},[n("h4",{staticClass:"col-title"},[t._v("属性编辑")]),t._v(" "),n("div",{staticClass:"grid-content cube-edit-grid"},[n("Propbar")],1)])],1)],1)},u=[];n.d(e,"a",function(){return r}),n.d(e,"b",function(){return u})},124:function(t,e,n){"use strict";var r=function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"preview-page"},[e("div",{attrs:{id:"cube-preview"}},[e("Preview")],1)])},u=[];n.d(e,"a",function(){return r}),n.d(e,"b",function(){return u})},125:function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"cube-list"}},[n("ul",t._l(t.aviablePackages,function(e){return n("li",{key:e.tag,staticClass:"block-component-item",attrs:{draggable:"true","data-block-description":JSON.stringify(e||"{}")}},[n("el-button",{attrs:{type:"primary",icon:"el-icon-plus"}},[t._v("\n        "+t._s(e.label)+"\n      ")])],1)}),0)])},u=[];n.d(e,"a",function(){return r}),n.d(e,"b",function(){return u})},126:function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"header"},[n("el-button",{attrs:{type:t.isTreeSaved?"success":"danger",loading:t.isSaving},on:{click:t.saveCacheTree}},[t._v("\n    "+t._s(t.isTreeSaved?"已保存":"点击保存")+"\n  ")]),t._v(" "),n("el-button",{attrs:{type:"danger"},on:{click:t.removeCacheTree}},[t._v("\n    清除缓存\n  ")])],1)},u=[];n.d(e,"a",function(){return r}),n.d(e,"b",function(){return u})},127:function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"cube-block-item",attrs:{"data-uuid":t.node.uuid,draggable:"true"}},[n("div",{staticClass:"node-item-group"},[t.node.root?t._e():n("div",{staticClass:"cube-slot before",attrs:{"data-uuid":t.node.uuid,"data-put-before":!0}}),t._v(" "),n("div",{class:{"node-item":!0,normal:!t.node.root,root:t.node.root,selected:t.node.selected},attrs:{"data-tag":t.node.tag},on:{click:function(e){t.setSelectedNode(t.node)}}},[t._v("\n\n      "+t._s(t.node.label)+"\n\n      "),t._v(" "),t.node.root?t._e():n("i",{staticClass:"el-icon-close node-item__del",on:{click:function(e){e.stopPropagation(),t.deleteNode(t.node)}}})])]),t._v(" "),!0===t.getPackageSlots(t.node.tag)?n("ul",{staticClass:"slot-container"},[n("li",{staticClass:"slot-item"},[t._l(t.getSlots(t.node.slots),function(t){return[n("Editor",{key:t.uuid,attrs:{node:t}})]}),t._v(" "),n("div",{staticClass:"cube-slot slot",attrs:{"data-uuid":t.node.uuid,title:"匿名卡槽","data-slot-name":"default","data-slot-title":"匿名卡槽"}})],2)]):t._e(),t._v(" "),t.getPackageSlots(t.node.tag)&&t.getPackageSlots(t.node.tag).length>0?n("ul",{staticClass:"slot-container"},t._l(t.getPackageSlots(t.node.tag),function(e,r){return n("li",{key:r,staticClass:"slot-item"},[t._l(t.getSlots(t.node.slots,e.slotName),function(t){return[n("Editor",{key:t.uuid,attrs:{node:t}})]}),t._v(" "),n("div",{staticClass:"cube-slot slot",attrs:{"data-uuid":t.node.uuid,title:e.slotLabel,"data-slot-name":e.slotName,"data-slot-title":e.slotLabel}})],2)}),0):t._e()])},u=[];n.d(e,"a",function(){return r}),n.d(e,"b",function(){return u})},128:function(t,e,n){"use strict";var r=function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"cube-prop"},[e("PropItem",{attrs:{attrs:this.bindProps}})],1)},u=[];n.d(e,"a",function(){return r}),n.d(e,"b",function(){return u})},129:function(t,e,n){"use strict";var r=function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"grid-content cube-tree-preview",attrs:{id:"cube-preview"}})},u=[];n.d(e,"a",function(){return r}),n.d(e,"b",function(){return u})},130:function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"cube-prop-item"},[n("ul",t._l(t.attrs,function(e,r){return n("li",{key:r},["string"==typeof t.attrs[r]?n("span",[t._v("\n        "+t._s(r)+": "),n("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.attrs[r],callback:function(e){t.$set(t.attrs,r,e)},expression:"attrs[key]"}})],1):t._e(),t._v(" "),"object"==typeof t.attrs[r]?n("span",[[n("div",{staticStyle:{"margin-left":"12px"}},[n("p",{staticStyle:{margin:"5px 0 0"}},[t._v(t._s(r)+"包含的属性")]),t._v(" "),n("PropItem",{attrs:{attrs:t.attrs[r]}})],1)]],2):t._e()])}),0)])},u=[];n.d(e,"a",function(){return r}),n.d(e,"b",function(){return u})},134:function(t,e,n){"use strict";n.r(e);var r=n(121),u=n(57);for(var o in u)"default"!==o&&function(t){n.d(e,t,function(){return u[t]})}(o);var a=n(3),i=Object(a.a)(u.default,r.a,r.b,!1,null,null,null);i.options.__file="blank.vue",e.default=i.exports},182:function(t,e,n){"use strict";n.r(e);var r=n(129),u=n(79);for(var o in u)"default"!==o&&function(t){n.d(e,t,function(){return u[t]})}(o);n(336),n(337);var a=n(3),i=Object(a.a)(u.default,r.a,r.b,!1,null,"0e620ac2",null);i.options.__file="preview.vue",e.default=i.exports},183:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=f(n(340)),u=f(n(180)),o=f(n(175)),a=f(n(348)),i=f(n(349)),c=f(n(353)),s=f(n(44)),l=f(n(25)),d=f(n(19));function f(t){return t&&t.__esModule?t:{default:t}}var v=new c.default,p=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,a.default)(this,t),e.id&&(this.setCacheTree(e.id,e.struct),s.default.commit("updateTree",e))}return(0,i.default)(t,[{key:"getTreeId",value:function(){return s.default.state.tree.id}},{key:"getCacheId",value:function(t){return"tree"+t}},{key:"getStruct",value:function(){return l.default.extend({},s.default.state.tree.struct)}},{key:"getUsedComponents",value:function(){var t=this.getStruct(),e=new c.default;return function t(n){n.tag&&e.add(n.tag),n.slots&&n.slots.forEach(function(e){t(e)})}(t),[].concat((0,o.default)(e))}},{key:"setCacheTree",value:function(t,e){var n=this.getCacheId(t);window.localStorage.setItem(n,(0,u.default)({id:t,struct:e||this.getStruct()})),s.default.commit("updateTreeSaved",!0)}},{key:"removeCacheTree",value:function(t){var e=this.getCacheId(t);window.localStorage.removeItem(e),s.default.commit("updateTreeSaved",!1)}},{key:"getCacheTree",value:function(t){var e=this.getCacheId(t);return JSON.parse(window.localStorage.getItem(e)||"{}")}},{key:"getRootUid",value:function(){return this.getStruct().uuid}},{key:"getRandomUid",value:function(){var t=[];return function e(n){t.push(n.uuid),n.slots&&n.slots.forEach(function(t){e(t)})}(this.getStruct()),t[Math.floor(Math.random()*t.length)]}},{key:"getNodeByUid",value:function(t){var e=null;return function n(r){r.uuid===t?e=r:!e&&r.slots&&r.slots.forEach(function(t){n(t)})}(this.getStruct()),e}},{key:"selectNodeByUid",value:function(t){var e=this.getStruct(),n=null;return function e(r){r.uuid===t?(n=r,r.selected=!0):r.selected=!1,r.slots&&r.slots.forEach(function(t){e(t)})}(e),s.default.commit("updateTreeStruct",e),n}},{key:"getSeletedNode",value:function(){var t=!1;return function e(n){n.selected?t=n:!t&&n.slots&&n.slots.forEach(function(t){e(t)})}(this.getStruct()),t}},{key:"addNode",value:function(t,e){var n=this.getStruct(),r=!1;!function n(u){r||u.uuid!==t||(r=!0,u.slots=u.slots||[],u.slots.push(e)),!r&&u.slots&&u.slots.forEach(function(t){n(t)})}(n),s.default.commit("updateTreeStruct",n),this.selectNodeByUid(e.uuid)}},{key:"insertNodeBefore",value:function(t,e){var n=this.getStruct(),r=null;!function n(u){u.slots&&u.slots.forEach(function(o,a){r||(o.uuid===t?(r=o,u.slots.splice(a,0,e)):n(o))})}(n),s.default.commit("updateTreeStruct",n),this.selectNodeByUid(e.uuid)}},{key:"deleteNodeByUid",value:function(t){var e=this.getStruct(),n=!1,r=!1;return function e(u){if(u.uuid===t&&u.root)throw new Error("根节点不允许删除");!r&&u.slots&&u.slots.forEach(function(o,a){o.uuid===t?(r=o,n=o.selected,u.slots.splice(a,1)):e(o)})}(e),s.default.commit("updateTreeStruct",e),!n&&this.getSeletedNode()||this.selectNodeByUid(this.getRootUid()),r}},{key:"travelUpdateNodeByUid",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},r=this.getStruct();!function r(u){u.uuid===t?e(u):n(u),u.slots&&u.slots.forEach(function(t){r(t)})}(r),s.default.commit("updateTreeStruct",r)}},{key:"matchUpdateNodeByUid",value:function(t,e){var n=this.getStruct(),r=!1;!function n(u){r||u.uuid!==t||(r=!0,e(u)),!r&&u.slots&&u.slots.forEach(function(t){n(t)})}(n),s.default.commit("updateTreeStruct",n)}},{key:"renderTree",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"cube-preview",u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"cube-preview-inner";if(!document.getElementById(e))throw new Error("外部容器不存在");var o=this.getUsedComponents().map(function(t){if(!v.has(t))return v.add(t),n(368)("./"+t+".vue").then(function(e){d.default.component(t,d.default.extend(e.default))})});r.default.all(o).then(function(){var n=t.getStruct(),r=d.default.component("root-component",{render:function(t){return function t(e,n){var r=e.tag,u=e.properties||{},o=e.slots||[];return e.selected&&(e.properties.class=e.properties.class||{},e.properties.class["cube-selected"]=!0),n(r,u,o.map(function(e){return t(e,n)}))}(n,t)}});document.getElementById(u)||(document.getElementById(e).outerHTML='<div id="'+e+'"><div id="'+u+'"></div></div>'),(new r).$mount("#"+u)})}}]),t}();e.default=p},190:function(t,e,n){"use strict";var r=s(n(47)),u=s(n(19)),o=s(n(197)),a=s(n(134)),i=s(n(198)),c=s(n(44));function s(t){return t&&t.__esModule?t:{default:t}}n(370),n(371),n(372),n(375),u.default.config.devtools=!1,u.default.config.silent=!0,u.default.config.errorHandler=function(t,e){console.warn(t,e)};var l=[];(0,r.default)(o.default).forEach(function(t){var e=o.default[t],n=e.label,r=e.visible,u=e.slots,a=e.props;l.push({tag:t,label:n,visible:r,slots:u,props:a})}),c.default.commit("addPackages",l);var d=new u.default({el:"#root",router:i.default,store:c.default,data:{bus:new u.default},render:function(t){return t(a.default)}});u.default.use(d)},197:function(t,e,n){"use strict";t.exports={"block-root":{label:"根组件",visible:!1,slots:!0},"block-container":{label:"容器组件",visible:!0,slots:[{slotName:"header",slotLabel:"头部卡槽"},{slotName:"footer",slotLabel:"底部卡槽"}],props:{backgroundColor:{label:"背景颜色",type:"color",default:"#ccc",description:""}}},"block-image":{label:"图片组件",visible:!0,slots:!1,props:{imgURL:{label:"图片地址",type:"input",default:"https://p0.meituan.net/travelcube/a6d651dfde0437d2e13449b82ffbaf129203.png",description:""}}},"block-text":{label:"文本组件",visible:!0,slots:!1,props:{text:{label:"文本",type:"input",default:"hello world",description:""}}}}},198:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=f(n(24)),u=f(n(19)),o=f(n(25)),a=f(n(44)),i=f(n(316)),c=f(n(134)),s=f(n(317)),l=f(n(319)),d=f(n(339));function f(t){return t&&t.__esModule?t:{default:t}}u.default.use(i.default);var v=new i.default({mode:"hash",base:"/",linkActiveClass:"router-link-active",linkExactActiveClass:"router-link-exact-active",routes:[{path:"",redirect:"dashboard",component:c.default,children:[{path:"dashboard",meta:{},component:l.default},{path:"preview",meta:{},component:d.default}]},{path:"*",component:s.default}]});v.beforeEach(function(t,e,n){var u=o.default.getRouterMeta(t.matched);a.default.commit("updateRouteMeta",(0,r.default)({},u)),n()}),v.afterEach(function(t){}),e.default=v},223:function(t,e){},225:function(t,e){},25:function(t,e,n){"use strict";var r=o(n(203)),u=o(n(47));function o(t){return t&&t.__esModule?t:{default:t}}var a=n(220),i=n(305),c={isDeepEqual:n(308),isNumber:function(t){return"number"==typeof t&&isFinite(t)},isUndefined:function(t){return void 0===t},isArray:function(t){return Array.isArray?Array.isArray(t):"[object Array]"===Object.prototype.toString.call(t)},isObject:function(t){return"[object Object]"===Object.prototype.toString.call(t)},isFunction:function(t){return"function"==typeof t},isString:function(t){return"[object String]"===Object.prototype.toString.call(t)},md5:function(t){return a.createHash("md5").update(t+"","utf8").digest("hex")},getPageID:function(){return window.location.pathname.split("?")[0].replace(/^\//,"").split("/").join("-")},getRouterMeta:function(t){var e={};return Array.prototype.slice.call(t).forEach(function(t){t.meta&&(e=c.extend(e,t.meta))}),e},queryURL:function(t,e){var n={};return(t=t.replace(/^[^?=]*\?/gi,"").split("#")[0]).replace(/(^|&)([^&=]+)=([^&]*)/g,function(t,e,r,u){try{r=decodeURIComponent(r)}catch(t){}try{u=decodeURIComponent(u)}catch(t){}r in n?n[r]instanceof Array?n[r].push(u):n[r]=[n[r],u]:n[r]=/\[\]$/.test(r)?[u]:u}),e?n[e]:n},encodeURIJson:function(t){var e=[];for(var n in t)if(null!==t[n])if(t[n]instanceof Array)for(var r=0;r<t[n].length;r++)e.push(encodeURIComponent(n)+"="+encodeURIComponent(t[n][r]));else e.push(n+"="+encodeURIComponent(t[n]));return e.join("&")},extend:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=0,n=arguments.length<=1?0:arguments.length-1,r=void 0,u=void 0,o=void 0,a=void 0;for(t||(t=c.isArray(arguments.length<=1?void 0:arguments[1])?[]:{});e<n;e++)if(r=arguments.length<=e+1?void 0:arguments[e+1])for(u in r)o=t[u],a=r[u],o&&o===a||(c.isArray(a)?t[u]=c.extend([],a):c.isObject(a)?t[u]=c.extend(o&&c.isObject(o)?o:{},a):t[u]=a);return t},getDestructResult:function(t,e){var n={},r={};return t=(t=Array.isArray(t)?t:[t]).map(function(t){return t.indexOf(":")>-1&&(r[t.split(":")[0]]=t.split(":")[1]),t.split(":")[0]}),(0,u.default)(e).forEach(function(u){t.indexOf(u)>-1&&(n[r[u]||u]=e[u])}),n},getQueryJoin:function(t){return i.stringify(t)},getTrimedResult:function(t){var e=this;return"string"==typeof t?t.trim():"[object Object]"===Object.prototype.toString.call(t)?((0,u.default)(t).forEach(function(n){t[n]=e.getTrimedResult(t[n])}),t):"[object Array]"===Object.prototype.toString.call(t)?t.map(function(t){return e.getTrimedResult(t)}):t},renameKeys:function(t,e,n){if(!e||"object"!==(void 0===e?"undefined":(0,r.default)(e)))return t;if(Array.isArray(t)){for(var u=[],o=0;o<t.length;o++)u.push(c.renameKeys(t[o],e));return u}if("object"!==(void 0===t?"undefined":(0,r.default)(t)))return t;var a={},i=c.extend({},t);for(var s in e)if("object"===(0,r.default)(e[s])&&i.hasOwnProperty(s))i[s]=c.renameKeys(i[s],e[s]),a[s]=c.renameKeys(i[s],e[s]);else if(i.hasOwnProperty(s)&&s!==e[s]){var l=i[s];i[e[s]]=l,a[e[s]]=l,delete i[s]}return n?a:i},dateTimeFormat:function(t,e){var n={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds(),"q+":Math.floor((t.getMonth()+3)/3),S:t.getMilliseconds()};for(var r in/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length))),n)new RegExp("("+r+")").test(e)&&(e=e.replace(RegExp.$1,1===RegExp.$1.length?n[r]:("00"+n[r]).substr((""+n[r]).length)));return e},get uuid(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)})},interop:function(t){return t&&t.__esModule?t.default:t}};t.exports=c},258:function(t,e){},259:function(t,e){},315:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,u=n(25),o=(r=u)&&r.__esModule?r:{default:r};e.default={packages:[],routeMeta:{},isTreeSaved:!1,tree:{id:null,struct:{tag:"block-root",uuid:o.default.uuid,label:"页面容器",root:!0,selected:!0,properties:{props:{}},slots:[]}}}},317:function(t,e,n){"use strict";n.r(e);var r=n(122),u=n(59);for(var o in u)"default"!==o&&function(t){n.d(e,t,function(){return u[t]})}(o);n(318);var a=n(3),i=Object(a.a)(u.default,r.a,r.b,!1,null,"b4f9c5c4",null);i.options.__file="404.vue",e.default=i.exports},318:function(t,e,n){"use strict";var r=n(61);n.n(r).a},319:function(t,e,n){"use strict";n.r(e);var r=n(123),u=n(62);for(var o in u)"default"!==o&&function(t){n.d(e,t,function(){return u[t]})}(o);n(338);var a=n(3),i=Object(a.a)(u.default,r.a,r.b,!1,null,"19cc05c6",null);i.options.__file="home.vue",e.default=i.exports},320:function(t,e,n){"use strict";n.r(e);var r=n(125),u=n(64);for(var o in u)"default"!==o&&function(t){n.d(e,t,function(){return u[t]})}(o);n(321);var a=n(3),i=Object(a.a)(u.default,r.a,r.b,!1,null,"324050a2",null);i.options.__file="navbar.vue",e.default=i.exports},321:function(t,e,n){"use strict";var r=n(66);n.n(r).a},322:function(t,e,n){"use strict";n.r(e);var r=n(126),u=n(67);for(var o in u)"default"!==o&&function(t){n.d(e,t,function(){return u[t]})}(o);n(323);var a=n(3),i=Object(a.a)(u.default,r.a,r.b,!1,null,"957693a6",null);i.options.__file="header.vue",e.default=i.exports},323:function(t,e,n){"use strict";var r=n(69);n.n(r).a},324:function(t,e,n){"use strict";n.r(e);var r=n(127),u=n(70);for(var o in u)"default"!==o&&function(t){n.d(e,t,function(){return u[t]})}(o);n(331);var a=n(3),i=Object(a.a)(u.default,r.a,r.b,!1,null,"745b65db",null);i.options.__file="actionbar.vue",e.default=i.exports},331:function(t,e,n){"use strict";var r=n(72);n.n(r).a},332:function(t,e,n){"use strict";n.r(e);var r=n(128),u=n(73);for(var o in u)"default"!==o&&function(t){n.d(e,t,function(){return u[t]})}(o);n(335);var a=n(3),i=Object(a.a)(u.default,r.a,r.b,!1,null,"6c884648",null);i.options.__file="prop.vue",e.default=i.exports},333:function(t,e,n){"use strict";n.r(e);var r=n(130),u=n(75);for(var o in u)"default"!==o&&function(t){n.d(e,t,function(){return u[t]})}(o);n(334);var a=n(3),i=Object(a.a)(u.default,r.a,r.b,!1,null,"b7934122",null);i.options.__file="prop-item.vue",e.default=i.exports},334:function(t,e,n){"use strict";var r=n(77);n.n(r).a},335:function(t,e,n){"use strict";var r=n(78);n.n(r).a},336:function(t,e,n){"use strict";var r=n(81);n.n(r).a},337:function(t,e,n){"use strict";var r=n(82);n.n(r).a},338:function(t,e,n){"use strict";var r=n(83);n.n(r).a},339:function(t,e,n){"use strict";n.r(e);var r=n(124),u=n(84);for(var o in u)"default"!==o&&function(t){n.d(e,t,function(){return u[t]})}(o);n(369);var a=n(3),i=Object(a.a)(u.default,r.a,r.b,!1,null,"ad17a686",null);i.options.__file="home.vue",e.default=i.exports},368:function(t,e,n){var r={"./block-container.vue":[376,0,3],"./block-image.vue":[377,0,4],"./block-root.vue":[378,0,5],"./block-text.vue":[379,0,6]};function u(t){var e=r[t];return e?Promise.all(e.slice(1).map(n.e)).then(function(){var t=e[0];return n(t)}):Promise.resolve().then(function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e})}u.keys=function(){return Object.keys(r)},u.id=368,t.exports=u},369:function(t,e,n){"use strict";var r=n(86);n.n(r).a},370:function(t,e,n){"use strict";var r=o(n(47)),u=o(n(19));function o(t){return t&&t.__esModule?t:{default:t}}var a={_addSuffix2:function(t,e){return t+e}};(0,r.default)(a).forEach(function(t){u.default.filter(t,a[t])})},371:function(t,e,n){"use strict";var r=a(n(24)),u=a(n(19)),o=a(n(183));function a(t){return t&&t.__esModule?t:{default:t}}u.default.mixin({data:function(){return{treeInst:new o.default}},computed:{currentRouteData:function(){var t=this.$router.history.current,e=(0,r.default)({},t);return e.matched=e.matched.map(function(t){return{name:t.name,path:t.path,regex:t.regex}}),e}}})},372:function(t,e,n){"use strict";u(n(373));var r=u(n(374));function u(t){return t&&t.__esModule?t:{default:t}}u(n(19)).default.use(r.default,{size:"small"})},375:function(t,e,n){},44:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=c(n(175)),u=c(n(24)),o=c(n(19)),a=c(n(45)),i=c(n(315));function c(t){return t&&t.__esModule?t:{default:t}}o.default.use(a.default);var s={updateRouteMeta:function(t,e){t.routeMeta=(0,u.default)({},e)},addPackages:function(t,e){t.packages=[].concat((0,r.default)(e))},updateTree:function(t,e){t.tree=(0,u.default)({},e)},updateTreeSaved:function(t,e){t.isTreeSaved=e},updateTreeStruct:function(t,e){t.tree.struct=(0,u.default)({},e)}},l={state:i.default,mutations:s,actions:{},getters:{tree:function(t){return(0,u.default)({},t.tree)},struct:function(t){return(0,u.default)({},t.tree.struct)},packages:function(t){return[].concat((0,r.default)(t.packages))},aviablePackages:function(t){return[].concat((0,r.default)(t.packages)).filter(function(t){return t.visible})},routeMeta:function(t){return(0,u.default)({},t.routeMeta)},structChange:function(t){return function(){return(0,u.default)({},t.tree.struct)}}},modules:{},plugins:[],strict:!1};e.default=new a.default.Store(l)},57:function(t,e,n){"use strict";n.r(e);var r=n(58),u=n.n(r);for(var o in r)"default"!==o&&function(t){n.d(e,t,function(){return r[t]})}(o);e.default=u.a},58:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={data:function(){return{}}}},59:function(t,e,n){"use strict";n.r(e);var r=n(60),u=n.n(r);for(var o in r)"default"!==o&&function(t){n.d(e,t,function(){return r[t]})}(o);e.default=u.a},60:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={data:function(){return{}}}},61:function(t,e,n){},62:function(t,e,n){"use strict";n.r(e);var r=n(63),u=n.n(r);for(var o in r)"default"!==o&&function(t){n.d(e,t,function(){return r[t]})}(o);e.default=u.a},63:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=f(n(24)),u=f(n(25)),o=f(n(44)),a=f(n(320)),i=f(n(322)),c=f(n(324)),s=f(n(332)),l=f(n(182)),d=n(45);function f(t){return t&&t.__esModule?t:{default:t}}e.default={components:{Header:i.default,Navbar:a.default,Actionbar:c.default,Preview:l.default,Propbar:s.default},data:function(){return{treeId:null,isSaving:!1}},methods:{boradcastStructChange:function(){this.$root.bus.$emit("structChange")}},computed:(0,r.default)({},(0,d.mapGetters)(["tree","struct"]),(0,d.mapState)(["isTreeSaved"])),mounted:function(){var t=this;this.treeId=this.currentRouteData.query.id;var e={};this.$store.watch(this.$store.getters.structChange,function(n,r){u.default.isDeepEqual(n)||t.boradcastStructChange(),o.default.commit("updateTreeSaved",u.default.isDeepEqual(e,t.tree))}),this.boradcastStructChange()}}},64:function(t,e,n){"use strict";n.r(e);var r=n(65),u=n.n(r);for(var o in r)"default"!==o&&function(t){n.d(e,t,function(){return r[t]})}(o);e.default=u.a},65:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,u=n(24),o=(r=u)&&r.__esModule?r:{default:r},a=n(45);e.default={methods:{bindDragEvent:function(){document.querySelectorAll(".block-component-item").forEach(function(t,e){t.ondragstart=null,t.ondrag=null,t.ondragend=null}),document.querySelectorAll(".block-component-item").forEach(function(t,e){t.ondragstart=function(t){var e=t.target.getAttribute("data-block-description");window.localStorage.setItem("cube-drag-element",e)},t.ondrag=function(t){},t.ondragend=function(t){window.localStorage.removeItem("cube-drag-element")}})}},computed:(0,o.default)({},(0,a.mapGetters)(["aviablePackages"])),mounted:function(){this.bindDragEvent()}}},66:function(t,e,n){},67:function(t,e,n){"use strict";n.r(e);var r=n(68),u=n.n(r);for(var o in r)"default"!==o&&function(t){n.d(e,t,function(){return r[t]})}(o);e.default=u.a},68:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=o(n(24)),u=(o(n(25)),o(n(44)),n(45));function o(t){return t&&t.__esModule?t:{default:t}}e.default={props:{treeId:String},data:function(){return{isSaving:!1}},methods:{saveCacheTree:function(){var t=this;this.isSaving=!0,setTimeout(function(){t.treeInst.setCacheTree(t.treeId),t.$root.bus.$emit("structChange"),t.isSaving=!1},300)},removeCacheTree:function(){this.treeInst.removeCacheTree(this.treeId),this.$notify({title:"成功",message:"缓存删除成功",type:"success",duration:1e3})}},computed:(0,r.default)({},(0,u.mapGetters)(["tree","struct"]),(0,u.mapState)(["isTreeSaved"]))}},69:function(t,e,n){},70:function(t,e,n){"use strict";n.r(e);var r=n(71),u=n.n(r);for(var o in r)"default"!==o&&function(t){n.d(e,t,function(){return r[t]})}(o);e.default=u.a},71:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=s(n(24)),u=s(n(47)),o=s(n(180)),a=s(n(25)),i=n(45),c=s(n(326));function s(t){return t&&t.__esModule?t:{default:t}}e.default={name:"Editor",props:{node:{type:Object,default:function(){return{}}}},methods:{getSlots:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default";return t.filter(function(t){return"default"===e?"default"===t.properties.slot||!t.properties.slot:t.properties.slot===e})},setSelectedNode:function(t){this.treeInst.selectNodeByUid(t.uuid)},deleteNode:function(t){this.treeInst.deleteNodeByUid(t.uuid)},getPackageSlots:function(t){var e=this.packages.filter(function(e){return e.tag===t})[0]||{};return e.slots||(e.slots=!1),e.slots},removeAllDragOver:function(){c.default.findAll(".cube-slot").forEach(function(t){c.default.removeClass(t,"drag-over")})},closest:function(t,e){var n=void 0;["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"].some(function(t){return"function"==typeof document.body[t]&&(n=t,!0)});for(var r=void 0;t;){if((r=t.parentElement)&&r[n](e))return r;t=r}return null},bindDragEvent:function(){document.querySelectorAll(".cube-block-item").forEach(function(t,e){t.ondragstart=null,t.ondrag=null,t.ondragend=null}),document.querySelectorAll(".cube-block-item").forEach(function(t,e){t.ondragstart=function(t){var e={uuid:t.target.getAttribute("data-uuid")};window.localStorage.setItem("cube-drag-element",(0,o.default)(e))},t.ondrag=function(t){},t.ondragend=function(t){window.localStorage.removeItem("cube-drag-element")}})},bindDropEvent:function(){document.querySelectorAll(".cube-slot").forEach(function(t,e){t.ondragenter=null,t.ondragover=null,t.ondragleave=null,t.ondrop=null});var t=this;document.querySelectorAll(".cube-slot").forEach(function(e,n){e.ondragenter=function(t){t.preventDefault()},e.ondragover=function(n){n.preventDefault(),n.stopPropagation(),t.removeAllDragOver();var r=n.toElement||n.relatedTarget,u=JSON.parse(window.localStorage.getItem("cube-drag-element")).uuid;u&&document.querySelectorAll('.cube-block-item[data-uuid="'+u+'"]')[0].contains(r)||c.default.addClass(e,"drag-over")},e.ondragleave=function(n){n.preventDefault(),n.stopPropagation();var r=n.fromElement||n.relatedTarget,u=n.toElement||n.relatedTarget;t.closest(r,".cube-slot")?this.contains(u)&&u.getAttribute("class").indexOf("cube-slot")>-1&&(t.removeAllDragOver(),c.default.addClass(e,"drag-over")):t.removeAllDragOver()},e.ondrop=function(e){e.stopPropagation(),e.preventDefault();var n=document.querySelectorAll(".drag-over")[0];if(t.removeAllDragOver(),n){var r=JSON.parse(window.localStorage.getItem("cube-drag-element")),o=n.getAttribute("data-put-before"),i=n.getAttribute("data-uuid"),c=n.getAttribute("data-slot-name"),s=null;if(o&&(c=(t.treeInst.getNodeByUid(i).properties||{}).slot||"default"),r.uuid)i!==r.uuid&&(s=t.treeInst.deleteNodeByUid(r.uuid),c&&(s.properties=s.properties||{},s.properties.slot=c));else{var l=r.tag,d=r.label,f=r.props,v=void 0===f?{}:f,p={};(0,u.default)(v).forEach(function(t){var e=v[t],n=(e.label,e.default);p[t]=n});var g=a.default.uuid;s={tag:l,uuid:g,label:d,selected:!0,properties:{props:p,attrs:{id:g},slot:c},ref:g}}t.treeInst[o?"insertNodeBefore":"addNode"](i,s),setTimeout(function(){t.bindDragDropEvent()},50)}else console.warn("没有获取到目标位置")}})},bindDragDropEvent:function(){this.bindDragEvent(),this.bindDropEvent()}},computed:(0,r.default)({},(0,i.mapGetters)(["packages"])),mounted:function(){this.bindDragDropEvent()}}},72:function(t,e,n){},73:function(t,e,n){"use strict";n.r(e);var r=n(74),u=n.n(r);for(var o in r)"default"!==o&&function(t){n.d(e,t,function(){return r[t]})}(o);e.default=u.a},74:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=o(n(25)),u=o(n(333));function o(t){return t&&t.__esModule?t:{default:t}}e.default={data:function(){return{bindProps:{}}},components:{PropItem:u.default},computed:{selectedNode:function(){return this.treeInst.getSeletedNode()}},watch:{selectedNode:{deep:!0,handler:function(t,e){t.uuid!==e.uuid&&(this.bindProps=this.selectedNode.properties.props)}},bindProps:{deep:!0,handler:function(t,e){this.treeInst.matchUpdateNodeByUid(this.selectedNode.uuid,function(e){e.properties.props=r.default.extend({},t)})}}}}},75:function(t,e,n){"use strict";n.r(e);var r=n(76),u=n.n(r);for(var o in r)"default"!==o&&function(t){n.d(e,t,function(){return r[t]})}(o);e.default=u.a},76:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"PropItem",props:{attrs:Object}}},77:function(t,e,n){},78:function(t,e,n){},79:function(t,e,n){"use strict";n.r(e);var r=n(80),u=n.n(r);for(var o in r)"default"!==o&&function(t){n.d(e,t,function(){return r[t]})}(o);e.default=u.a},80:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={mounted:function(){var t=this;this.$root.$data.bus.$on("structChange",function(){t.treeInst.renderTree()})}}},81:function(t,e,n){},82:function(t,e,n){},83:function(t,e,n){},84:function(t,e,n){"use strict";n.r(e);var r=n(85),u=n.n(r);for(var o in r)"default"!==o&&function(t){n.d(e,t,function(){return r[t]})}(o);e.default=u.a},85:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=o(n(183)),u=o(n(182));function o(t){return t&&t.__esModule?t:{default:t}}e.default={components:{Preview:u.default},mounted:function(){var t=this.currentRouteData.query.id,e=this.treeInst.getCacheTree(t);new r.default(e).renderTree()}}},86:function(t,e,n){}});
//# sourceMappingURL=app.5cf8dd.js.map